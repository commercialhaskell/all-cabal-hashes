cabal-version:      1.12
name:               tahoe-chk
version:            0.2.0.0
synopsis:
  The Tahoe-LAFS' Content-Hash-Key (CHK) cryptographic protocol.

description:
  Reversibly encrypt plaintext, encode ciphertext to shares, and serialize
  shares to bytes such that confidentiality, integrity, and authenticity are
  assured.

homepage:           https://whetstone.private.storage/privatestorage/tahoe-chk
bug-reports:
  https://whetstone.private.storage/privatestorage/tahoe-chk/-/issues

author:             Jean-Paul Calderone and others
maintainer:         PrivateStorage.io, Inc.
copyright:          2020-2023 The Authors
license:            BSD3
license-file:       LICENSE
category:           Cryptography,Library,Parsers,Security
build-type:         Simple
extra-source-files:
  ChangeLog.md
  README.md

tested-with:
  GHC ==8.6.5 || ==8.10.7 || ==9.0.2 || ==9.2.4 || ==9.4.3

source-repository head
  type:     git
  location:
    gitlab@whetstone.private.storage:privatestorage/tahoe-chk.git

library
  exposed-modules:
    Tahoe.CHK
    Tahoe.CHK.Capability
    Tahoe.CHK.Cipher
    Tahoe.CHK.Crypto
    Tahoe.CHK.Encrypt
    Tahoe.CHK.Merkle
    Tahoe.CHK.Parsing
    Tahoe.CHK.Server
    Tahoe.CHK.SHA256d
    Tahoe.CHK.Share
    Tahoe.CHK.Types
    Tahoe.CHK.Upload
    Tahoe.CHK.URIExtension
    Tahoe.CHK.Validate
    Tahoe.Netstring
    Tahoe.Server
    Tahoe.Util

  other-modules:      Paths_tahoe_chk
  ghc-options:        -Wall
  hs-source-dirs:     src
  default-extensions: OverloadedStrings
  build-depends:
      aeson               >=1.4.7    && <2.2
    , async               >=2.2.2    && <2.3
    , base                >=4.7      && <5
    , base32              >=0.2.1    && <0.4
    , base64-bytestring   >=1.0.0.3  && <1.3
    , binary              >=0.8.6    && <0.9
    , bytestring          >=0.10.8.2 && <0.12
    , concurrency         >=1.11     && <2
    , containers          >=0.6.0.1  && <0.7
    , cryptonite          >=0.27     && <0.31
    , deepseq             >=1.1      && <1.6
    , directory           >=1.3.3    && <1.4
    , extra               >=1.7.7    && <1.8
    , fec                 >=0.1.1    && <0.2
    , filepath            >=1.4.2    && <1.5
    , lens                >=5.0      && <5.3
    , megaparsec          >=8.0      && <9.3
    , memory              >=0.15     && <0.19
    , network-byte-order  >=0.1.5    && <0.2
    , parser-combinators  >=1.2.1    && <1.4
    , primitive           >=0.7.0.1  && <0.8
    , text                >=1.2.3.1  && <2.2
    , tree-diff           >=0.1      && <0.3
    , utility-ht          >=0.0.15   && <0.1

  default-language:   Haskell2010

executable tahoe-chk-encrypt
  main-is:            Main.hs
  other-modules:      Paths_tahoe_chk
  hs-source-dirs:     app
  default-extensions: OverloadedStrings
  ghc-options:        -Wall -threaded -rtsopts -with-rtsopts=-N
  build-depends:
      base                  >=4.7      && <5
    , base32                >=0.2.1    && <0.4
    , bytestring            >=0.10.8.2 && <0.12
    , optparse-applicative  >=0.15.1.0 && <0.19
    , tahoe-chk
    , text                  >=1.2.3.1  && <2.2

  default-language:   Haskell2010

test-suite tahoe-chk-tests
  type:               exitcode-stdio-1.0
  main-is:            Spec.hs
  other-modules:
    Generators
    Paths_tahoe_chk
    SpecCHK
    SpecCrypto
    SpecMerkle
    SpecServer
    SpecUEB
    SpecUpload
    SpecUtil
    SpecZFEC
    Vectors

  hs-source-dirs:     test
  default-extensions:
    NamedFieldPuns
    OverloadedStrings

  ghc-options:        -Wall -threaded -rtsopts -with-rtsopts=-N
  build-depends:
      aeson              >=1.4.7    && <2.2
    , base               >=4.7      && <5
    , base32             >=0.2.1    && <0.4
    , base64-bytestring  >=1.0.0.3  && <1.3
    , binary             >=0.8.6    && <0.9
    , bytestring         >=0.10.8.2 && <0.12
    , containers         >=0.6.0.1  && <0.7
    , cryptonite         >=0.27     && <0.31
    , directory          >=1.3.3    && <1.4
    , fec                >=0.1.1    && <0.2
    , filepath           >=1.4.2    && <1.5
    , hedgehog           >=1.0.3    && <1.5
    , lens               >=5.0      && <5.3
    , megaparsec         >=8.0      && <9.3
    , memory             >=0.15     && <0.19
    , scientific         >=0.3.6.2  && <0.4
    , tahoe-chk
    , tasty              >=1.2.3    && <1.5
    , tasty-hedgehog     >=1.0.0.2  && <1.5
    , tasty-hunit        >=0.10.0.2 && <0.11
    , temporary          >=1.3      && <1.4
    , text               >=1.2.3.1  && <2.2
    , tree-diff          >=0.1      && <0.3
    , vector             >=0.12.1.2 && <0.13
    , yaml               >=0.11.5.0 && <0.11.9.0 || >=0.11.9.0.0 && <0.12

  default-language:   Haskell2010
