cabal-version:      1.18
name:               hspec-dirstream
version:            1.0.0.4
license:            BSD3
license-file:       LICENSE
copyright:          Copyright: (c) 2018-2019 Vanessa McHale
maintainer:         vamchale@gmail.com
author:             Vanessa McHale
homepage:           https://hub.darcs.net/vmchale/hspec-dirstream
synopsis:           Helper functions to simplify adding integration tests.
description:
    This package uses [hspec](http://hackage.haskell.org/package/hspec) and [dirstream](http://hackage.haskell.org/package/dirstream) to provide easy-to-use functions for integration tests.

category:           Testing, Development
build-type:         Simple
data-files:
    test/data/*.hs
    test/data/*.out

extra-source-files: cabal.project.local
extra-doc-files:    README.md

source-repository head
    type:     darcs
    location: https://hub.darcs.net/vmchale/hspec-dirstream

flag development
    description: Enable `-Werror`
    default:     False
    manual:      True

library
    exposed-modules:  Test.Hspec.Dirstream
    hs-source-dirs:   src
    default-language: Haskell2010
    other-extensions:
        FlexibleInstances GeneralizedNewtypeDeriving OverloadedStrings
        StandaloneDeriving

    ghc-options:      -Wall
    build-depends:
        base >=4.9 && <4.17,
        hspec,
        dirstream,
        pipes,
        pipes-safe,
        filepath,
        hspec-core,
        system-filepath,
        text

    if flag(development)
        ghc-options: -Werror

    if impl(ghc >=8.0)
        ghc-options:
            -Wincomplete-uni-patterns -Wincomplete-record-updates -Wcompat

test-suite hspec-dirstream-test
    type:             exitcode-stdio-1.0
    main-is:          Spec.hs
    hs-source-dirs:   test
    default-language: Haskell2010
    ghc-options:      -threaded -rtsopts -with-rtsopts=-N -Wall
    build-depends:
        base,
        hspec-dirstream,
        hspec

    if flag(development)
        if impl(ghc >=8.0)
            ghc-options: -Werror

    if impl(ghc >=8.0)
        ghc-options:
            -Wincomplete-uni-patterns -Wincomplete-record-updates -Wcompat
