cabal-version:      1.18
name:               hspec-junit-formatter
version:            1.1.1.0
license:            MIT
license-file:       LICENSE
copyright:          2021 Renaissance Learning Inc
maintainer:         engineering@freckle.com
author:             Freckle R&D
homepage:           https://github.com/freckle/hspec-junit-formatter#readme
bug-reports:        https://github.com/freckle/hspec-junit-formatter/issues
synopsis:           A JUnit XML runner/formatter for hspec
description:
    Allows hspec tests to write JUnit XML output for parsing in various tools.

category:           Testing
build-type:         Simple
extra-source-files:
    tests/golden/default-ghc-8.xml
    tests/golden/default-ghc-9.xml
    tests/golden/prefixed-ghc-8.xml
    tests/golden/prefixed-ghc-9.xml

extra-doc-files:
    README.md
    CHANGELOG.md

source-repository head
    type:     git
    location: https://github.com/freckle/hspec-junit-formatter

library
    exposed-modules:
        Test.Hspec.JUnit
        Test.Hspec.JUnit.Config
        Test.Hspec.JUnit.Config.Env
        Test.Hspec.JUnit.Format
        Test.Hspec.JUnit.Formatter
        Test.Hspec.JUnit.Formatter.Env
        Test.Hspec.JUnit.Render
        Test.Hspec.JUnit.Schema

    hs-source-dirs:     library
    other-modules:      Paths_hspec_junit_formatter
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    ghc-options:
        -fignore-optim-changes -Weverything -Wno-all-missed-specialisations
        -Wno-missed-specialisations -Wno-missing-exported-signatures
        -Wno-missing-import-lists -Wno-missing-local-signatures
        -Wno-monomorphism-restriction -Wno-safe -Wno-unsafe

    build-depends:
        array >=0.5.4.0,
        base >=4.16.4.0 && <5,
        conduit >=1.3.5,
        containers >=0.6.5.1,
        directory >=1.3.6.2,
        exceptions >=0.10.4,
        filepath >=1.4.2.2,
        hspec-api >=2.10.0,
        hspec-core >=2.10.0,
        iso8601-time >=0.1.5,
        regex-base >=0.94.0.2,
        regex-tdfa >=1.3.2.1,
        text >=1.2.5.0,
        time >=1.11.1.1,
        xml-conduit >=1.9.1.2,
        xml-types >=0.3.8

    if impl(ghc >=9.2)
        ghc-options: -Wno-missing-kind-signatures

    if impl(ghc >=8.10)
        ghc-options:
            -Wno-missing-safe-haskell-mode -Wno-prepositive-qualified-module

    if impl(ghc >=8.8)
        ghc-options: -fwrite-ide-info

test-suite readme
    type:               exitcode-stdio-1.0
    main-is:            README.lhs
    other-modules:      Paths_hspec_junit_formatter
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    ghc-options:
        -fignore-optim-changes -Weverything -Wno-all-missed-specialisations
        -Wno-missed-specialisations -Wno-missing-exported-signatures
        -Wno-missing-import-lists -Wno-missing-local-signatures
        -Wno-monomorphism-restriction -Wno-safe -Wno-unsafe -pgmL
        markdown-unlit

    build-depends:
        base >=4.16.4.0 && <5,
        hspec >=2.10.0,
        hspec-junit-formatter,
        markdown-unlit >=0.5.1

    if impl(ghc >=9.2)
        ghc-options: -Wno-missing-kind-signatures

    if impl(ghc >=8.10)
        ghc-options:
            -Wno-missing-safe-haskell-mode -Wno-prepositive-qualified-module

    if impl(ghc >=8.8)
        ghc-options: -fwrite-ide-info

test-suite spec
    type:               exitcode-stdio-1.0
    main-is:            Main.hs
    hs-source-dirs:     tests
    other-modules:
        ExampleSpec
        Paths_hspec_junit_formatter

    default-language:   Haskell2010
    default-extensions:
        BangPatterns DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    ghc-options:
        -fignore-optim-changes -Weverything -Wno-all-missed-specialisations
        -Wno-missed-specialisations -Wno-missing-exported-signatures
        -Wno-missing-import-lists -Wno-missing-local-signatures
        -Wno-monomorphism-restriction -Wno-safe -Wno-unsafe -threaded
        -rtsopts -O0 -with-rtsopts=-N

    build-depends:
        base >=4.16.4.0 && <5,
        containers >=0.6.5.1,
        filepath >=1.4.2.2,
        hspec >=2.10.0,
        hspec-golden >=0.2.1.0,
        hspec-junit-formatter,
        temporary >=1.3,
        text >=1.2.5.0,
        xml-conduit >=1.9.1.2

    if impl(ghc >=9.2)
        ghc-options: -Wno-missing-kind-signatures

    if impl(ghc >=8.10)
        ghc-options:
            -Wno-missing-safe-haskell-mode -Wno-prepositive-qualified-module

    if impl(ghc >=8.8)
        ghc-options: -fwrite-ide-info
