-- Initial hurl.cabal generated by cabal init.  For further documentation, 
-- see http://haskell.org/cabal/users-guide/

-- The name of the package.
name:                hurl

-- The package version.  See the Haskell package versioning policy (PVP) 
-- for standards guiding when and how versions should be incremented.
-- https://wiki.haskell.org/Package_versioning_policy
-- PVP summary:      +-+------- breaking API changes
--                   | | +----- non-breaking API additions
--                   | | | +--- code changes with no API change
version:             1.1.0.0

-- A short (one-line) description of the package.
synopsis:            Haskell URL resolver

-- A longer description of the package.
description:         Retrieves resources for a URI, whether they be HTTP(S), file:, or data:.

-- URL for the project homepage or repository.
homepage:            https://git.nzoss.org.nz/alcinnz/hurl

-- The license under which the package is released.
license:             GPL-3

-- The file containing the license text.
license-file:        LICENSE

-- The package author(s).
author:              Adrian Cochrane

-- An email address to which users can send suggestions, bug reports, and 
-- patches.
maintainer:          adrian@openwork.nz

-- A copyright notice.
-- copyright:           

category:            Network

build-type:          Simple

-- Extra files to be distributed with the package, such as examples or a 
-- README.
extra-source-files:  ChangeLog.md

-- Constraint on the version of Cabal needed to build this package.
cabal-version:       >=1.10

Flag http
  Description: Support HTTP(S) URIs.
  Default:     True
  Manual:      True

Flag file
  Description: Support file: URIs.
  Default:     True
  Manual:      True

Flag data
  Description: Support data: URIs.
  Default:     True
  Manual:      True

Flag freedesktop
  Description: Dispatches unsupported URIs to external apps on FreeDesktop.Org-compatible desktops. Works on most non-mainstream/non-proprietary desktops.
  Default:     True
  Manual:      True

source-repository head
    type: git
    location: https://git.nzoss.org.nz/alcinnz/hurl.git

library
  -- Modules exported by the library.
  exposed-modules:     Network.URI.Charset, Network.URI.Fetch
  
  -- Modules included in this library but not exported.
  other-modules:       Network.URI.Locale, Network.URI.Messages
  
  -- LANGUAGE extensions used by modules in this package.
  -- other-extensions:    
  
  -- Other library packages from which modules are imported.
  build-depends:       base >=4.9 && <4.10, text >= 1.2 && <1.3,
                       network-uri >=2.6 && <2.7, bytestring >= 0.10 && < 0.11
  
  -- Directories containing source files.
  hs-source-dirs:      src
  
  -- Base language which the package is written in.
  default-language:    Haskell2010
  
  if flag(http)
    CPP-options:   -DWITH_HTTP_URI
    build-depends: http-client >= 0.6 && <0.7, http-types >= 0.12 && <0.13,
                   http-client-tls >= 0.3 && <0.4
  if flag(file)
    CPP-options:   -DWITH_FILE_URI
  if flag(data)
    CPP-options:   -DWITH_DATA_URI
    build-depends: base64-bytestring >=1.0 && <2.0
  if flag(freedesktop)
    CPP-options:   -DWITH_XDG
    build-depends: filepath, directory, process >= 1.2 && <2.0
    other-modules: Network.URI.XDG.Ini, Network.URI.XDG.MimeApps, Network.URI.XDG.DesktopEntry
