cabal-version:      1.12
name:               hal
version:            1.0.1
license:            BSD3
license-file:       LICENSE
copyright:          2018 Nike, Inc.
maintainer:         nikeoss
author:             Nike, Inc.
homepage:           https://github.com/Nike-inc/hal#readme
bug-reports:        https://github.com/Nike-inc/hal/issues
synopsis:
    A runtime environment for Haskell applications running on AWS Lambda.

description:
    This library uniquely supports different types of AWS Lambda Handlers for your
    needs/comfort with advanced Haskell. Instead of exposing a single function
    that constructs a Lambda, this library exposes many.

category:           Web,AWS
x-revision:         1
build-type:         Simple
extra-source-files:
    README.md
    CHANGELOG.md

source-repository head
    type:     git
    location: https://github.com/Nike-inc/hal

flag use-aeson-2-2
    description: Required parsers are split out into a different package
    default:     False

library
    exposed-modules:
        AWS.Lambda.Combinators
        AWS.Lambda.Context
        AWS.Lambda.Events.ApiGateway.ProxyRequest
        AWS.Lambda.Events.ApiGateway.ProxyResponse
        AWS.Lambda.Events.EventBridge
        AWS.Lambda.Events.EventBridge.Detail.SSM.ParameterStoreChange
        AWS.Lambda.Events.Kafka
        AWS.Lambda.Events.S3
        AWS.Lambda.Events.SQS
        AWS.Lambda.Internal
        AWS.Lambda.Runtime
        AWS.Lambda.Runtime.Value
        AWS.Lambda.RuntimeClient
        AWS.Lambda.RuntimeClient.Internal

    hs-source-dirs:     src
    other-modules:      Paths_hal
    default-language:   Haskell2010
    default-extensions:
        OverloadedStrings BangPatterns DefaultSignatures DeriveFoldable
        DeriveFunctor DeriveGeneric DeriveLift DeriveTraversable
        DisambiguateRecordFields DuplicateRecordFields EmptyCase
        GeneralizedNewtypeDeriving InstanceSigs LambdaCase
        MultiParamTypeClasses MultiWayIf OverloadedStrings PatternSynonyms
        ScopedTypeVariables

    ghc-options:
        -Wall -Wcompat -Wincomplete-record-updates
        -Wincomplete-uni-patterns -Wredundant-constraints
        -fno-warn-partial-type-signatures -fno-warn-name-shadowing
        -fwarn-tabs -fwarn-unused-imports -fwarn-missing-signatures
        -fwarn-incomplete-patterns

    build-depends:
        base >=4.7 && <5,
        base64-bytestring >=1.0.0.2,
        bytestring >=0.10.8.2,
        case-insensitive >=1.2.0.11,
        conduit >=1.3.1,
        conduit-extra >=1.3.0,
        containers >=0.6.0.1,
        exceptions >=0.10.0,
        hashable >=1.2.7.0,
        http-client >=0.5.14,
        http-types >=0.12.2,
        mtl >=2.2.2,
        scientific >=0.3.3.0 && <0.4,
        text >=1.2.3.1,
        time >=1.8.0.2,
        unordered-containers >=0.2.9.0

    if flag(use-aeson-2-2)
        build-depends:
            aeson >=2.2.0.0 && <2.3.0.0,
            attoparsec-aeson

    else
        build-depends: aeson >=1.2.0.0 && <1.6 || >=2.0.0.0 && <2.2.0.0

test-suite hal-test
    type:               exitcode-stdio-1.0
    main-is:            Spec.hs
    hs-source-dirs:     test
    other-modules:
        AWS.Lambda.Events.ApiGateway.ProxyRequest.Gen
        AWS.Lambda.Events.ApiGateway.ProxyRequest.Gen.Parameters
        AWS.Lambda.Events.ApiGateway.ProxyRequest.Gen.Resource
        AWS.Lambda.Events.ApiGateway.ProxyRequest.Spec
        AWS.Lambda.Events.ApiGateway.ProxyResponse.Gen
        AWS.Lambda.Events.ApiGateway.ProxyResponse.Spec
        AWS.Lambda.Events.EventBridge.Detail.SSM.ParameterStoreChange.Gen
        AWS.Lambda.Events.EventBridge.Gen
        AWS.Lambda.Events.EventBridge.Spec
        AWS.Lambda.Events.Kafka.Gen
        AWS.Lambda.Events.Kafka.Spec
        Gen.Header
        Paths_hal

    default-language:   Haskell2010
    default-extensions:
        OverloadedStrings BangPatterns DefaultSignatures DeriveFoldable
        DeriveFunctor DeriveGeneric DeriveLift DeriveTraversable
        DisambiguateRecordFields DuplicateRecordFields EmptyCase
        GeneralizedNewtypeDeriving InstanceSigs LambdaCase
        MultiParamTypeClasses MultiWayIf OverloadedStrings PatternSynonyms
        ScopedTypeVariables

    ghc-options:
        -Wall -Wcompat -Wincomplete-record-updates
        -Wincomplete-uni-patterns -Wredundant-constraints
        -fno-warn-partial-type-signatures -fno-warn-name-shadowing
        -fwarn-tabs -fwarn-unused-imports -fwarn-missing-signatures
        -fwarn-incomplete-patterns -threaded -rtsopts -with-rtsopts=-N

    build-depends:
        aeson >=1.4.2.0,
        base >=4.7 && <5,
        base64-bytestring >=1.0.0.2,
        bytestring >=0.10.8.2,
        case-insensitive >=1.2.0.11,
        containers >=0.6.0.1,
        hal,
        hedgehog >=1.0.3 && <1.5,
        hspec >=2.6.1,
        hspec-hedgehog,
        http-client >=0.5.14,
        http-types >=0.12.2 && <0.13,
        raw-strings-qq >=1.1 && <1.2,
        scientific >=0.3.6.2,
        text >=1.2.3.1,
        time >=1.8.0.2,
        transformers >=0.5.5.0,
        unordered-containers >=0.2.9.0,
        vector >=0.12.0.0 && <0.14.0.0
