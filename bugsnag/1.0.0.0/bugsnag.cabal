cabal-version:      1.18
name:               bugsnag
version:            1.0.0.0
license:            MIT
license-file:       LICENSE
maintainer:         pbrisbin@gmail.com
author:             Patrick Brisbin
homepage:           https://github.com/pbrisbin/bugsnag-haskell#readme
synopsis:           Bugsnag error reporter for Haskell
description:        Please see README.md
category:           Web
build-type:         Simple
extra-source-files: test/fixtures/index-project/Foo.hs
extra-doc-files:
    CHANGELOG.md
    README.md

flag examples
    description: Build the examples
    default:     False

library
    exposed-modules:
        Data.Bugsnag
        Data.Bugsnag.Settings
        Network.Bugsnag
        Network.Bugsnag.BeforeNotify
        Network.Bugsnag.CodeIndex
        Network.Bugsnag.Device
        Network.Bugsnag.Exception
        Network.Bugsnag.Exception.Parse
        Network.Bugsnag.Notify
        Network.Bugsnag.StackFrame

    hs-source-dirs:     src
    other-modules:      Paths_bugsnag
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        Glob >=0.9.0,
        base >=4.11.0 && <5,
        bugsnag-hs >=0.2.0.8,
        bytestring >=0.10.8.2,
        containers >=0.6.0.1,
        http-client >=0.6.4,
        http-client-tls >=0.3.5.3,
        parsec >=3.1.14.0,
        template-haskell >=2.14.0.0,
        text >=1.2.3.1,
        th-lift-instances >=0.1.14,
        ua-parser >=0.7.5.1,
        unordered-containers >=0.2.10.0

executable example-cli
    main-is:            Main.hs
    hs-source-dirs:     examples/cli
    other-modules:      Paths_bugsnag
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        base >=4.11.0 && <5,
        bugsnag -any

    if !flag(examples)
        buildable: False

executable example-simple
    main-is:            Main.hs
    hs-source-dirs:     examples/simple
    other-modules:      Paths_bugsnag
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        base >=4.11.0 && <5,
        bugsnag -any

    if !flag(examples)
        buildable: False

test-suite spec
    type:               exitcode-stdio-1.0
    main-is:            Spec.hs
    hs-source-dirs:     test
    other-modules:
        Examples
        Network.Bugsnag.BeforeNotifySpec
        Network.Bugsnag.CodeIndexSpec
        Network.Bugsnag.DeviceSpec
        Network.Bugsnag.ExceptionSpec
        Paths_bugsnag

    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        base >=4.11.0 && <5,
        bugsnag -any,
        hspec >=2.7.1,
        text >=1.2.3.1,
        unliftio >=0.2.12
