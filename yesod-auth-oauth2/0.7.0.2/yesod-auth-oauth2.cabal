cabal-version:   1.18
name:            yesod-auth-oauth2
version:         0.7.0.2
license:         MIT
license-file:    LICENSE
maintainer:      engineering@freckle.com
author:
    Tom Streller,
    Patrick Brisbin,
    Freckle Engineering

homepage:        http://github.com/freckle/yesod-auth-oauth2
bug-reports:     https://github.com/freckle/yesod-auth-oauth2/issues
synopsis:        OAuth 2.0 authentication plugins
description:
    Library to authenticate with OAuth 2.0 for Yesod web applications.

category:        Web
build-type:      Simple
extra-doc-files:
    README.md
    CHANGELOG.md

source-repository head
    type:     git
    location: https://github.com/freckle/yesod-auth-oauth2

flag example
    description: Build the example application
    default:     False

library
    exposed-modules:
        Network.OAuth.OAuth2.Compat
        UnliftIO.Except
        URI.ByteString.Extension
        Yesod.Auth.OAuth2
        Yesod.Auth.OAuth2.Auth0
        Yesod.Auth.OAuth2.AzureAD
        Yesod.Auth.OAuth2.BattleNet
        Yesod.Auth.OAuth2.Bitbucket
        Yesod.Auth.OAuth2.ClassLink
        Yesod.Auth.OAuth2.Dispatch
        Yesod.Auth.OAuth2.DispatchError
        Yesod.Auth.OAuth2.ErrorResponse
        Yesod.Auth.OAuth2.EveOnline
        Yesod.Auth.OAuth2.Exception
        Yesod.Auth.OAuth2.GitHub
        Yesod.Auth.OAuth2.GitLab
        Yesod.Auth.OAuth2.Google
        Yesod.Auth.OAuth2.Nylas
        Yesod.Auth.OAuth2.Prelude
        Yesod.Auth.OAuth2.Random
        Yesod.Auth.OAuth2.Salesforce
        Yesod.Auth.OAuth2.Slack
        Yesod.Auth.OAuth2.Spotify
        Yesod.Auth.OAuth2.Twitch
        Yesod.Auth.OAuth2.Upcase
        Yesod.Auth.OAuth2.WordPressDotCom

    hs-source-dirs:   src
    other-modules:    Paths_yesod_auth_oauth2
    default-language: Haskell2010
    ghc-options:      -Wall
    build-depends:
        aeson >=0.6,
        base >=4.9.0.0 && <5,
        bytestring >=0.9.1.4,
        cryptonite >=0.25,
        errors >=2.3.0,
        hoauth2 >=1.11.0,
        http-client >=0.4.0,
        http-conduit >=2.0,
        http-types >=0.8,
        memory >=0.14.18,
        microlens >=0.4.10,
        mtl >=2.2.2,
        safe-exceptions >=0.1.7.0,
        text >=0.7,
        transformers >=0.5.5.0,
        unliftio >=0.2.10,
        uri-bytestring >=0.3.2.1,
        yesod-auth >=1.6.0,
        yesod-core >=1.6.0

executable yesod-auth-oauth2-example
    main-is:          Main.hs
    hs-source-dirs:   example
    other-modules:    Paths_yesod_auth_oauth2
    default-language: Haskell2010
    ghc-options:      -Wall -threaded -rtsopts -with-rtsopts=-N
    build-depends:
        aeson >=0.6,
        aeson-pretty >=0.8.7,
        base >=4.9.0.0 && <5,
        bytestring >=0.9.1.4,
        containers >=0.6.0.1,
        http-conduit >=2.0,
        load-env >=0.2.0.2,
        text >=0.7,
        warp >=3.2.25,
        yesod >=1.6.0,
        yesod-auth >=1.6.0,
        yesod-auth-oauth2 -any

    if !flag(example)
        buildable: False

test-suite test
    type:             exitcode-stdio-1.0
    main-is:          Spec.hs
    hs-source-dirs:   test
    other-modules:
        URI.ByteString.ExtensionSpec
        Paths_yesod_auth_oauth2

    default-language: Haskell2010
    ghc-options:      -Wall
    build-depends:
        base >=4.9.0.0 && <5,
        hspec >=2.6.1,
        uri-bytestring >=0.3.2.1,
        yesod-auth-oauth2 -any
