-- Initial wai-enforce-https.cabal generated by cabal init.  For further
-- documentation, see http://haskell.org/cabal/users-guide/

name:                wai-enforce-https
version:             1.0.0.0
synopsis:            Enforce HTTPS in Wai server app safely.
description:         Wai middleware enforcing HTTPS protocol on any incoming request. In case of non-encrypted HTTP, traffic is redirected using 301 Permanent Redirect or optionally 307 Temporary Redirect. Middleware has compatibility modes for various reverse proxies (load balancers) and therefore can be used with Heroku, Google Cloud (Ingress), Azure or any other type of PAS or Cloud provider.
license:             BSD3
license-file:        LICENSE
author:              Marek Fajkus
maintainer:          marek.faj@gmail.com
-- copyright:
category:            Web
build-type:          Simple
extra-source-files:  README.md
                   , CHANGELOG.md
cabal-version:       >=1.10
homepage:            https://github.com/turboMaCk/wai-enforce-https
tested-with:         GHC == 7.10.3
                   , GHC == 7.8.4
                   , GHC == 7.6.3
                   , GHC == 8.4.4
                   , GHC == 8.6.5

data-files:          examples/cert.pem
                   , examples/key.pem

Flag examples
  Description:  Build example projects
  Default:      False

library
  hs-source-dirs:      lib
  exposed-modules:     Network.Wai.Middleware.EnforceHTTPS
                     , Network.HTTP.Forwarded
  -- other-modules:
  -- other-extensions:
  build-depends:       base                      >= 4 && < 5
                     , wai
                     , network
                     , http-types
                     , bytestring
                     , text
                     , case-insensitive
  default-language:    Haskell2010

test-suite spec
    type:              exitcode-stdio-1.0
    hs-source-dirs:    test
    main-is:           Spec.hs
    other-modules:     EnforceHTTPSSpec
                     , ForwardedSpec
    build-depends:     base
                     , hspec
                     , wai-enforce-https
                     , wai
                     , wai-extra
                     , http-types
                     , bytestring
                     , case-insensitive
    ghc-options:       -Wall
    default-language:  Haskell2010

executable example-tls
    if flag(examples)
        buildable: True
    else
        buildable: False
    hs-source-dirs:    examples
    main-is:           TLSApp.hs
    build-depends:     base
                     , wai-enforce-https
                     , wai
                     , warp
                     , warp-tls
                     , http-types
    ghc-options:       -Wall
    default-language:  Haskell2010

executable example-proxy
    if flag(examples)
        buildable: True
    else
        buildable: False
    hs-source-dirs:    examples
    main-is:           Proxy.hs
    build-depends:     base
                     , wai-enforce-https
                     , wai
                     , warp
                     , http-types
    ghc-options:       -Wall
    default-language:  Haskell2010

source-repository head
  type:              git
  location:          https://github.com/turboMaCk/wai-enforce-https.git