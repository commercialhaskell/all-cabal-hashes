cabal-version:       2.4
-- Initial package description 'SJW.cabal' generated by 'cabal init'.  For
-- further documentation, see http://haskell.org/cabal/users-guide/

name:                SJW
version:             0.1.2.4
synopsis:            The Simple Javascript Wrench
description:
  SJW is a very simple tool to pack several JS modules into a single script.
  It doesn't really do proper compilation work (yet) except resolving the
  modules dependencies and detecting import loops but it provides each module
  with an independent execution context in the resulting script.
homepage:            https://git.marvid.fr/Tissevert/SJW
-- bug-reports:
license:             BSD-3-Clause
license-file:        LICENSE
author:              Tissevert
maintainer:          tissevert+devel@marvid.fr
-- copyright:
category:            Web
build-type:          Simple
extra-source-files:  CHANGELOG.md
                   , test/data/**/*.js

source-repository head
  type:          git
  location:      http://git.marvid.fr/Tissevert/SJW.git

library
  exposed-modules:     SJW
  other-modules:       SJW.Compiler
                     , SJW.Dependencies
                     , SJW.Module
                     , SJW.Module.File
                     , SJW.Module.Imports
                     , SJW.Source
  build-depends:       attoparsec >= 0.13.2 && < 0.15
                     , base >=4.9 && <4.16
                     , containers >= 0.5.0 && < 0.7
                     , directory >= 1.2.0 && < 1.4
                     , filepath >= 1.4.2 && < 1.5
                     , mtl >= 2.2.2 && < 2.3
                     , random >= 1.1 && < 1.3
                     , text >= 1.2.3 && < 2.1
                     , time >= 1.8.0 && < 1.14
                     , unix >= 2.7.2 && < 2.8
  hs-source-dirs:      src
  default-language:    Haskell2010
  ghc-options:         -Wall

executable sjw
  main-is:             src/Main.hs
  other-modules:       Paths_SJW
  autogen-modules:     Paths_SJW
  -- other-extensions:
  build-depends:       attoparsec
                     , base
                     , optparse-applicative >= 0.14 && < 0.18
                     , SJW
                     , text
  default-language:    Haskell2010
  ghc-options:         -Wall

benchmark big-src
  type:                exitcode-stdio-1.0
  main-is:             benchmark/Main.hs
  build-depends:       base
                     , directory
                     , filepath
                     , random
                     , SJW
                     , time
  default-language:    Haskell2010
  ghc-options:         -Wall

test-suite tests
  type:                detailed-0.9
  test-module:         Tests
  build-depends:       base
                     , Cabal
                     , directory
                     , filepath
                     , random
                     , SJW
  hs-source-dirs:      test
  default-language:    Haskell2010
  ghc-options:         -Wall
