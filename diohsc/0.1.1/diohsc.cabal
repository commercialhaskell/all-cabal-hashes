name:                diohsc
version:             0.1.1
synopsis:            Gemini client
homepage:            https://mbays.sdf.org/diohsc
category:            Browser
license:             GPL-3
license-file:        COPYING
author:              Martin Bays
maintainer:          mbays@sdf.org
build-type:          Simple
cabal-version:       >=1.10
extra-source-files:  README.md, THANKS, diohscrc.sample, Makefile, diohsc.1.md

description:
  Line-based command-oriented interactive client for the gemini protocol.

source-repository head
    type: git
    location: https://repo.or.cz/diohsc.git

Flag Libiconv
    Description: On windows: use libiconv for charset conversion
        (iconv is always used on POSIX systems, with no need for this flag)
    Default: False
    Manual: True

Flag Magic
    Description: Use libmagic to determine mimetypes of local files
    Default: False
    -- with `Default: True`, `cabal install` fails if libmagic is not installed
    Manual: True

executable diohsc
  main-is: diohsc.hs
  build-depends:
        base (>=4.3 && < 5)
      , asn1-types < 0.4
      , bytestring < 0.11
      , containers < 0.7
      , cryptonite < 0.28
      , data-default-class < 0.2
      , data-hash < 0.3
      , directory (>= 1.3 && < 1.4)
      , drunken-bishop < 0.2
      , exceptions < 0.11
      , filepath < 1.5
      , haskeline (>= 0.8 && < 0.9)
      , hourglass < 0.3
      , mime < 0.5
      , mtl < 2.3
      , network < 3.2
      , network-uri < 2.8
      , parsec < 3.2
      , pem < 0.3
      , process < 1.7
      , regex-compat < 0.96
      , safe < 0.4
      , temporary < 1.4
      , terminal-size < 0.4
      , text < 1.3
      , tls < 1.6
      , transformers < 0.6
      , x509 < 1.8
      , x509-store < 1.7
      , x509-validation < 1.7
  other-modules:
        ActiveIdentities
      , Alias
      , ANSIColour
      , BoundedBSChan
      , BStack
      , ClientCert
      , ClientSessionManager
      , Command
      , CommandLine
      , Fingerprint
      , GeminiProtocol
      , Identity
      , Marks
      , MetaString
      , Mundanities
      , Opts
      , Pager
      , Prompt
      , Request
      , RunExternal
      , ServiceCerts
      , Slurp
      , TextGemini
      , URI
      , Util
      , Version
  default-language: Haskell2010
  ghc-options: -threaded
  if os(windows)
    CPP-Options: -DWINDOWS
  else
    build-depends:
      unix
  if flag(Magic)
    CPP-Options: -DMAGIC
    build-depends:
      magic
  if ! os(windows) || flag(Libiconv)
    CPP-Options: -DICONV
    build-depends:
      iconv
