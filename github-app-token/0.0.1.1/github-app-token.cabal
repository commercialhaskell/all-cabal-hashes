cabal-version:   1.18
name:            github-app-token
version:         0.0.1.1
license:         MIT
license-file:    LICENSE
maintainer:      Freckle Education
homepage:        https://github.com/freckle/github-app-token#readme
bug-reports:     https://github.com/freckle/github-app-token/issues
synopsis:        Generate an installation access token for a GitHub App
description:     Please see README.md
category:        HTTP
build-type:      Simple
extra-doc-files:
    README.md
    CHANGELOG.md

source-repository head
    type:     git
    location: https://github.com/freckle/github-app-token

library
    exposed-modules:
        GitHub.App.Token
        GitHub.App.Token.AppCredentials
        GitHub.App.Token.Generate
        GitHub.App.Token.JWT
        GitHub.App.Token.Prelude
        GitHub.App.Token.Refresh

    hs-source-dirs:     src
    other-modules:      Paths_github_app_token
    default-language:   GHC2021
    default-extensions:
        DataKinds DeriveAnyClass DerivingVia DerivingStrategies
        DuplicateRecordFields GADTs LambdaCase NoImplicitPrelude
        NoMonomorphismRestriction OverloadedRecordDot OverloadedStrings
        RecordWildCards TypeFamilies

    ghc-options:
        -fignore-optim-changes -fwrite-ide-info -Weverything
        -Wno-all-missed-specialisations -Wno-missing-exported-signatures
        -Wno-missing-import-lists -Wno-missing-kind-signatures
        -Wno-missing-local-signatures -Wno-missing-safe-haskell-mode
        -Wno-monomorphism-restriction -Wno-prepositive-qualified-module
        -Wno-safe -Wno-unsafe

    build-depends:
        aeson >=2.0.3.0,
        base >=4.16.4.0 && <5,
        bytestring >=0.11.4.0,
        http-conduit >=2.3.8.1,
        http-types >=0.12.3,
        jwt >=0.11.0,
        path >=0.9.2,
        text >=1.2.5.0,
        time >=1.11.1.1,
        unliftio >=0.2.25.0

    if impl(ghc >=9.8)
        ghc-options:
            -Wno-missing-role-annotations -Wno-missing-poly-kind-signatures

test-suite readme
    type:               exitcode-stdio-1.0
    main-is:            README.lhs
    other-modules:      Paths_github_app_token
    default-language:   GHC2021
    default-extensions:
        DataKinds DeriveAnyClass DerivingVia DerivingStrategies
        DuplicateRecordFields GADTs LambdaCase NoImplicitPrelude
        NoMonomorphismRestriction OverloadedRecordDot OverloadedStrings
        RecordWildCards TypeFamilies

    ghc-options:
        -fignore-optim-changes -fwrite-ide-info -Weverything
        -Wno-all-missed-specialisations -Wno-missing-exported-signatures
        -Wno-missing-import-lists -Wno-missing-kind-signatures
        -Wno-missing-local-signatures -Wno-missing-safe-haskell-mode
        -Wno-monomorphism-restriction -Wno-prepositive-qualified-module
        -Wno-safe -Wno-unsafe -pgmL markdown-unlit

    build-depends:
        base >=4.16.4.0 && <5,
        bytestring >=0.11.4.0,
        directory >=1.3.6.2,
        dotenv >=0.10.0.0,
        github-app-token,
        http-conduit >=2.3.8.1,
        http-types >=0.12.3,
        lens >=5.1.1,
        lens-aeson >=1.2.2,
        markdown-unlit >=0.5.1,
        text >=1.2.5.0

    if impl(ghc >=9.8)
        ghc-options:
            -Wno-missing-role-annotations -Wno-missing-poly-kind-signatures

test-suite spec
    type:               exitcode-stdio-1.0
    main-is:            Main.hs
    hs-source-dirs:     tests
    other-modules:
        GitHub.App.Token.RefreshSpec
        Paths_github_app_token

    default-language:   GHC2021
    default-extensions:
        DataKinds DeriveAnyClass DerivingVia DerivingStrategies
        DuplicateRecordFields GADTs LambdaCase NoImplicitPrelude
        NoMonomorphismRestriction OverloadedRecordDot OverloadedStrings
        RecordWildCards TypeFamilies

    ghc-options:
        -fignore-optim-changes -fwrite-ide-info -Weverything
        -Wno-all-missed-specialisations -Wno-missing-exported-signatures
        -Wno-missing-import-lists -Wno-missing-kind-signatures
        -Wno-missing-local-signatures -Wno-missing-safe-haskell-mode
        -Wno-monomorphism-restriction -Wno-prepositive-qualified-module
        -Wno-safe -Wno-unsafe -threaded -rtsopts -with-rtsopts=-N

    build-depends:
        base >=4.16.4.0 && <5,
        github-app-token,
        hspec >=2.9.7,
        time >=1.11.1.1,
        unliftio >=0.2.25.0

    if impl(ghc >=9.8)
        ghc-options:
            -Wno-missing-role-annotations -Wno-missing-poly-kind-signatures
