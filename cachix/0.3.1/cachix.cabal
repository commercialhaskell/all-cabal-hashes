cabal-version: 2.2
name: cachix
version: 0.3.1
license: Apache-2.0
license-file: LICENSE
copyright: 2018 Domen Kožar
maintainer: domen@enlambda.com
author: Domen Kožar
homepage: https://github.com/cachix/cachix#readme
bug-reports: https://github.com/cachix/cachix/issues
synopsis: Command line client for Nix binary cache hosting https://cachix.org
build-type: Simple
extra-source-files:
    CHANGELOG.md
    README.md
    cbits/aliases.h
    test/data/*.input
    test/data/*.output

source-repository head
    type: git
    location: https://github.com/cachix/cachix

library
    exposed-modules:
        Cachix.Client
        Cachix.Client.Commands
        Cachix.Client.Config
        Cachix.Client.Config.Orphans
        Cachix.Client.Env
        Cachix.Client.Exception
        Cachix.Client.InstallationMode
        Cachix.Client.NetRc
        Cachix.Client.NixConf
        Cachix.Client.NixVersion
        Cachix.Client.OptionsParser
        Cachix.Client.Push
        Cachix.Client.Secrets
        Cachix.Client.Servant
        Cachix.Client.Store
        Cachix.Client.Store.Context
        Cachix.Client.URI
    cc-options: -Wall
    pkgconfig-depends: nix-store ==2.0 || >2.0, nix-main ==2.0 || >2.0
    hs-source-dirs: src
    other-modules:
        Paths_cachix
    autogen-modules:
        Paths_cachix
    default-language: Haskell2010
    default-extensions: NoImplicitPrelude DeriveGeneric
                        OverloadedStrings RecordWildCards
    extra-libraries:
        stdc++
        boost_context
    include-dirs: cbits
    ghc-options: -Wall -Wcompat -Wincomplete-record-updates
                 -Wincomplete-uni-patterns -Wredundant-constraints -fwarn-tabs
                 -fwarn-unused-imports -fwarn-missing-signatures
                 -fwarn-name-shadowing -fwarn-incomplete-patterns
    build-depends:
        async -any,
        base >=4.7 && <5,
        base64-bytestring -any,
        bytestring -any,
        cachix-api -any,
        conduit >=1.3.0,
        conduit-extra -any,
        containers -any,
        cookie -any,
        cryptonite -any,
        dhall -any,
        directory -any,
        ed25519 -any,
        filepath -any,
        fsnotify -any,
        here -any,
        hnix-store-core -any,
        http-client -any,
        http-client-tls -any,
        http-conduit -any,
        http-types -any,
        inline-c -any,
        inline-c-cpp -any,
        lzma-conduit -any,
        megaparsec >=7.0.0,
        memory -any,
        mmorph -any,
        netrc -any,
        optparse-applicative -any,
        process -any,
        protolude -any,
        resourcet -any,
        retry -any,
        safe-exceptions -any,
        servant >=0.15,
        servant-auth -any,
        servant-auth-client >=0.3.3.0,
        servant-client >=0.15,
        servant-client-core >=0.15,
        servant-conduit -any,
        text -any,
        unix -any,
        uri-bytestring -any,
        versions -any
    
    if os(osx)
        ghc-options: -pgmc=clang++

executable cachix
    main-is: Main.hs
    build-tool-depends: hspec-discover:hspec-discover -any
    hs-source-dirs: cachix
    other-modules:
        Paths_cachix
    autogen-modules:
        Paths_cachix
    default-language: Haskell2010
    default-extensions: NoImplicitPrelude DeriveGeneric
                        OverloadedStrings RecordWildCards
    ghc-options: -Wall -Wcompat -Wincomplete-record-updates
                 -Wincomplete-uni-patterns -Wredundant-constraints -fwarn-tabs
                 -fwarn-unused-imports -fwarn-missing-signatures
                 -fwarn-name-shadowing -fwarn-incomplete-patterns
    build-depends:
        base >=4.7 && <5,
        cachix -any,
        cachix-api -any

test-suite cachix-test
    type: exitcode-stdio-1.0
    main-is: Main.hs
    hs-source-dirs: test
    other-modules:
        InstallationModeSpec
        NetRcSpec
        NixConfSpec
        NixVersionSpec
        Paths_cachix
        Spec
    default-language: Haskell2010
    default-extensions: NoImplicitPrelude DeriveGeneric
                        OverloadedStrings RecordWildCards
    ghc-options: -Wall -Wcompat -Wincomplete-record-updates
                 -Wincomplete-uni-patterns -Wredundant-constraints -fwarn-tabs
                 -fwarn-unused-imports -fwarn-missing-signatures
                 -fwarn-name-shadowing -fwarn-incomplete-patterns
    build-depends:
        base >=4.7 && <5,
        cachix -any,
        cachix-api -any,
        directory -any,
        here -any,
        hspec -any,
        protolude -any,
        temporary -any
