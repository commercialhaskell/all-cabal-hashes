cabal-version:      2.0
name:               stack
version:            2.5.1.1
x-revision: 2
license:            BSD3
license-file:       LICENSE
maintainer:         manny@fpcomplete.com
author:             Commercial Haskell SIG
homepage:           http://haskellstack.org
bug-reports:        https://github.com/commercialhaskell/stack/issues
synopsis:           The Haskell Tool Stack
description:
    Please see the documentation at <https://docs.haskellstack.org>
    for usage information.
    .
    If building a 'stack' executable for distribution, please download the
    source code from <https://github.com/commercialhaskell/stack/releases>
    and build it using Stack itself in order to ensure identical behaviour
    to official binaries.  This package on Hackage is provided for convenience
    and bootstrapping purposes.
    .
    Note that the API for the library is not currently stable, and may
    change significantly, even between minor releases. It is
    currently only intended for use by the executable.

category:           Development
build-type:         Custom
extra-source-files:
    CONTRIBUTING.md
    ChangeLog.md
    README.md
    stack.yaml
    doc/azure_ci.md
    doc/build_command.md
    doc/build_overview.md
    doc/ChangeLog.md
    doc/CONTRIBUTING.md
    doc/coverage.md
    doc/custom_snapshot.md
    doc/dependency_visualization.md
    doc/developing_on_windows.md
    doc/docker_integration.md
    doc/faq.md
    doc/ghci.md
    doc/ghcjs.md
    doc/GUIDE.md
    doc/install_and_upgrade.md
    doc/lock_files.md
    doc/nix_integration.md
    doc/nonstandard_project_init.md
    doc/pantry.md
    doc/README.md
    doc/shell_autocompletion.md
    doc/SIGNING_KEY.md
    doc/stack_yaml_vs_cabal_package_file.md
    doc/travis_ci.md
    doc/yaml_configuration.md
    src/setup-shim/StackSetupShim.hs
    test/package-dump/ghc-7.10.txt
    test/package-dump/ghc-7.8.4-osx.txt
    test/package-dump/ghc-7.8.txt
    test/package-dump/ghc-head.txt
    src/test/Stack/Untar/test1.tar.gz
    src/test/Stack/Untar/test2.tar.gz

source-repository head
    type:     git
    location: https://github.com/commercialhaskell/stack

custom-setup
    setup-depends:
        Cabal >=3.0.0.0,
        base >=4.10 && <5,
        filepath >=1.4.2.1

flag developer-mode
    description: By default, should extra developer information be output?
    default:     False
    manual:      True

flag disable-git-info
    description: Disable compile-time inclusion of current git info in stack
    default:     False
    manual:      True

flag hide-dependency-versions
    description:
        Hides dependency versions from 'stack --version', used only by building Stack and the default 'stack.yaml'.  Note to packagers/distributors: DO NOT OVERRIDE THIS FLAG IF YOU ARE BUILDING 'stack' ANY OTHER WAY (e.g. using cabal or from Hackage), as it makes debugging support requests more difficult.

    default:     False
    manual:      True

flag integration-tests
    description: Run the integration test suite
    default:     False
    manual:      True

flag static
    description: Pass -static/-pthread to ghc when linking the stack binary.
    default:     False
    manual:      True

flag supported-build
    description:
        If false, causes 'stack --version' to issue a warning about the build being unsupported.  Should be True only if building with Stack and the default 'stack.yaml'.  Note to packagers/distributors: DO NOT OVERRIDE THIS FLAG IF YOU ARE BUILDING 'stack' ANY OTHER WAY (e.g. using cabal or from Hackage), as it makes debugging support requests more difficult.

    default:     False
    manual:      True

library
    exposed-modules:
        Control.Concurrent.Execute
        Data.Attoparsec.Args
        Data.Attoparsec.Combinators
        Data.Attoparsec.Interpreter
        Data.Monoid.Map
        Network.HTTP.StackClient
        Options.Applicative.Args
        Options.Applicative.Builder.Extra
        Options.Applicative.Complicated
        Path.CheckInstall
        Path.Extra
        Path.Find
        Stack.Build
        Stack.Build.Cache
        Stack.Build.ConstructPlan
        Stack.Build.Execute
        Stack.Build.Haddock
        Stack.Build.Installed
        Stack.Build.Source
        Stack.Build.Target
        Stack.BuildPlan
        Stack.Clean
        Stack.Config
        Stack.Config.Build
        Stack.Config.Docker
        Stack.Config.Nix
        Stack.ConfigCmd
        Stack.Constants
        Stack.Constants.Config
        Stack.Coverage
        Stack.DefaultColorWhen
        Stack.Docker
        Stack.Dot
        Stack.FileWatch
        Stack.GhcPkg
        Stack.Ghci
        Stack.Ghci.Script
        Stack.Hoogle
        Stack.IDE
        Stack.Init
        Stack.Ls
        Stack.Lock
        Stack.New
        Stack.Nix
        Stack.Options.BenchParser
        Stack.Options.BuildMonoidParser
        Stack.Options.BuildParser
        Stack.Options.CleanParser
        Stack.Options.ConfigParser
        Stack.Options.Completion
        Stack.Options.DockerParser
        Stack.Options.DotParser
        Stack.Options.ExecParser
        Stack.Options.GhcBuildParser
        Stack.Options.GhciParser
        Stack.Options.GhcVariantParser
        Stack.Options.GlobalParser
        Stack.Options.HaddockParser
        Stack.Options.HpcReportParser
        Stack.Options.LogLevelParser
        Stack.Options.NewParser
        Stack.Options.NixParser
        Stack.Options.PackageParser
        Stack.Options.ResolverParser
        Stack.Options.ScriptParser
        Stack.Options.SDistParser
        Stack.Options.TestParser
        Stack.Options.Utils
        Stack.Package
        Stack.PackageDump
        Stack.Path
        Stack.Prelude
        Stack.Runners
        Stack.Script
        Stack.SDist
        Stack.Setup
        Stack.Setup.Installed
        Stack.SetupCmd
        Stack.SourceMap
        Stack.Storage.Project
        Stack.Storage.User
        Stack.Storage.Util
        Stack.Types.Build
        Stack.Types.CompilerBuild
        Stack.Types.Compiler
        Stack.Types.Config
        Stack.Types.Config.Build
        Stack.Types.Docker
        Stack.Types.GhcPkgId
        Stack.Types.NamedComponent
        Stack.Types.Nix
        Stack.Types.Package
        Stack.Types.PackageName
        Stack.Types.Resolver
        Stack.Types.SourceMap
        Stack.Types.TemplateName
        Stack.Types.Version
        Stack.Types.VersionIntervals
        Stack.Unpack
        Stack.Upgrade
        Stack.Upload
        System.Info.ShortPathName
        System.Permissions
        System.Process.Pager
        System.Terminal
        Paths_stack

    hs-source-dirs:   src/
    other-modules:
        Path.Extended
        Stack.Types.Cache

    autogen-modules:  Paths_stack
    default-language: Haskell2010
    ghc-options:
        -Wall -fwarn-tabs -fwarn-incomplete-uni-patterns
        -fwarn-incomplete-record-updates -optP-Wno-nonportable-include-path
        -fwarn-identities

    build-depends:
        Cabal >=3.0.0.0,
        aeson >=1.4.6.0 && <1.6,
        annotated-wl-pprint >=0.7.0,
        ansi-terminal >=0.9.1,
        array >=0.5.3.0,
        async >=2.2.2,
        attoparsec >=0.13.2.3,
        base >=4.10 && <4.15,
        base64-bytestring >=1.0.0.3,
        bytestring >=0.10.8.2,
        casa-client >=0.0.1,
        casa-types >=0.0.1,
        colour >=2.3.5,
        conduit >=1.3.1.2,
        conduit-extra >=1.3.4,
        containers >=0.6.0.1,
        cryptonite >=0.25,
        cryptonite-conduit >=0.2.2,
        deepseq >=1.4.4.0,
        directory >=1.3.3.0,
        echo >=0.1.3,
        exceptions >=0.10.4,
        extra >=1.6.19,
        file-embed >=0.0.11.1,
        filelock >=0.1.1.5,
        filepath >=1.4.2.1,
        fsnotify >=0.3.0.1,
        generic-deriving >=1.12.4,
        hackage-security >=0.5.3.0,
        hashable >=1.2.7.0,
        hi-file-parser >=0.1.0.0,
        hpack >=0.33.0,
        hpc >=0.6.0.3,
        http-client >=0.6.4,
        http-client-tls >=0.3.5.3,
        http-conduit >=2.3.7.3,
        http-download >=0.2.0.0,
        http-types >=0.12.3,
        memory >=0.14.18,
        microlens >=0.4.10,
        mintty >=0.1.2,
        mono-traversable >=1.0.15.1,
        mtl >=2.2.2,
        mustache >=2.3.1,
        neat-interpolation >=0.3.2.6,
        network-uri >=2.6.2.0,
        open-browser >=0.2.1.0,
        optparse-applicative >=0.14.3.0,
        pantry >=0.5.1.3 && <0.5.3,
        path >=0.6.1,
        path-io >=1.4.2,
        persistent >=2.9.2 && <2.14,
        persistent-sqlite >=2.9.3,
        persistent-template >=2.6.0,
        pretty >=1.1.3.6,
        primitive >=0.6.4.0,
        process >=1.6.5.0,
        project-template >=0.2.0.1,
        regex-applicative-text >=0.1.0.1,
        retry >=0.8.1.0,
        rio >=0.1.18.0,
        rio-prettyprint >=0.1.1.0,
        semigroups >=0.18.5,
        split >=0.2.3.3,
        stm >=2.5.0.0,
        streaming-commons >=0.2.1.2,
        tar >=0.5.1.1,
        template-haskell >=2.14.0.0,
        temporary >=1.3,
        text >=1.2.3.1,
        text-metrics >=0.3.0,
        th-reify-many >=0.1.9,
        time >=1.8.0.2,
        tls >=1.4.1,
        transformers >=0.5.6.2,
        typed-process >=0.2.6.0,
        unicode-transforms >=0.3.6,
        unix-compat >=0.5.2,
        unliftio >=0.2.12,
        unordered-containers >=0.2.10.0,
        vector >=0.12.1.2,
        yaml >=0.11.2.0,
        zip-archive >=0.4.1,
        zlib >=0.6.2.1

    if os(windows)
        cpp-options:   -DWINDOWS
        build-depends: Win32 >=2.6.1.0

    else
        build-tool-depends: hsc2hs:hsc2hs -any
        build-depends:      unix >=2.7.2.2

    if flag(developer-mode)
        cpp-options: -DSTACK_DEVELOPER_MODE_DEFAULT=True

    else
        cpp-options: -DSTACK_DEVELOPER_MODE_DEFAULT=False

    if os(windows)
        hs-source-dirs: src/windows/
        other-modules:  System.Uname

    else
        c-sources:      src/unix/cbits/uname.c
        hs-source-dirs: src/unix/
        other-modules:  System.Uname

executable stack
    main-is:          Main.hs
    hs-source-dirs:   src/main
    other-modules:
        BuildInfo
        Build_stack
        Paths_stack

    autogen-modules:
        Build_stack
        Paths_stack

    default-language: Haskell2010
    ghc-options:
        -Wall -fwarn-tabs -fwarn-incomplete-uni-patterns
        -fwarn-incomplete-record-updates -optP-Wno-nonportable-include-path
        -threaded -rtsopts

    build-depends:
        Cabal >=3.0.0.0,
        aeson >=1.4.6.0,
        annotated-wl-pprint >=0.7.0,
        ansi-terminal >=0.9.1,
        array >=0.5.3.0,
        async >=2.2.2,
        attoparsec >=0.13.2.3,
        base >=4.10 && <5,
        base64-bytestring >=1.0.0.3,
        bytestring >=0.10.8.2,
        casa-client >=0.0.1,
        casa-types >=0.0.1,
        colour >=2.3.5,
        conduit >=1.3.1.2,
        conduit-extra >=1.3.4,
        containers >=0.6.0.1,
        cryptonite >=0.25,
        cryptonite-conduit >=0.2.2,
        deepseq >=1.4.4.0,
        directory >=1.3.3.0,
        echo >=0.1.3,
        exceptions >=0.10.4,
        extra >=1.6.19,
        file-embed >=0.0.11.1,
        filelock >=0.1.1.5,
        filepath >=1.4.2.1,
        fsnotify >=0.3.0.1,
        generic-deriving >=1.12.4,
        hackage-security >=0.5.3.0,
        hashable >=1.2.7.0,
        hi-file-parser >=0.1.0.0,
        hpack >=0.33.0,
        hpc >=0.6.0.3,
        http-client >=0.6.4,
        http-client-tls >=0.3.5.3,
        http-conduit >=2.3.7.3,
        http-download >=0.2.0.0,
        http-types >=0.12.3,
        memory >=0.14.18,
        microlens >=0.4.10,
        mintty >=0.1.2,
        mono-traversable >=1.0.15.1,
        mtl >=2.2.2,
        mustache >=2.3.1,
        neat-interpolation >=0.3.2.6,
        network-uri >=2.6.2.0,
        open-browser >=0.2.1.0,
        optparse-applicative >=0.14.3.0,
        pantry >=0.5.1.3,
        path >=0.6.1,
        path-io >=1.4.2,
        persistent >=2.9.2,
        persistent-sqlite >=2.9.3,
        persistent-template >=2.6.0,
        pretty >=1.1.3.6,
        primitive >=0.6.4.0,
        process >=1.6.5.0,
        project-template >=0.2.0.1,
        regex-applicative-text >=0.1.0.1,
        retry >=0.8.1.0,
        rio >=0.1.18.0,
        rio-prettyprint >=0.1.1.0,
        semigroups >=0.18.5,
        split >=0.2.3.3,
        stack -any,
        stm >=2.5.0.0,
        streaming-commons >=0.2.1.2,
        tar >=0.5.1.1,
        template-haskell >=2.14.0.0,
        temporary >=1.3,
        text >=1.2.3.1,
        text-metrics >=0.3.0,
        th-reify-many >=0.1.9,
        time >=1.8.0.2,
        tls >=1.4.1,
        transformers >=0.5.6.2,
        typed-process >=0.2.6.0,
        unicode-transforms >=0.3.6,
        unix-compat >=0.5.2,
        unliftio >=0.2.12,
        unordered-containers >=0.2.10.0,
        vector >=0.12.1.2,
        yaml >=0.11.2.0,
        zip-archive >=0.4.1,
        zlib >=0.6.2.1

    if os(windows)
        cpp-options:   -DWINDOWS
        build-depends: Win32 >=2.6.1.0

    else
        build-tool-depends: hsc2hs:hsc2hs -any
        build-depends:      unix >=2.7.2.2

    if flag(developer-mode)
        cpp-options: -DSTACK_DEVELOPER_MODE_DEFAULT=True

    else
        cpp-options: -DSTACK_DEVELOPER_MODE_DEFAULT=False

    if flag(static)
        ld-options: -static -pthread

    if !flag(disable-git-info)
        cpp-options:   -DUSE_GIT_INFO
        build-depends:
            githash >=0.1.3.3,
            optparse-simple >=0.1.1.2

    if flag(hide-dependency-versions)
        cpp-options: -DHIDE_DEP_VERSIONS

    if flag(supported-build)
        cpp-options: -DSUPPORTED_BUILD

executable stack-integration-test
    main-is:          IntegrationSpec.hs
    hs-source-dirs:   test/integration test/integration/lib
    other-modules:
        StackTest
        Paths_stack

    default-language: Haskell2010
    ghc-options:
        -Wall -fwarn-tabs -fwarn-incomplete-uni-patterns
        -fwarn-incomplete-record-updates -optP-Wno-nonportable-include-path
        -threaded -rtsopts -with-rtsopts=-N

    build-depends:
        Cabal >=3.0.0.0,
        aeson >=1.4.6.0,
        annotated-wl-pprint >=0.7.0,
        ansi-terminal >=0.9.1,
        array >=0.5.3.0,
        async >=2.2.2,
        attoparsec >=0.13.2.3,
        base >=4.10 && <5,
        base64-bytestring >=1.0.0.3,
        bytestring >=0.10.8.2,
        casa-client >=0.0.1,
        casa-types >=0.0.1,
        colour >=2.3.5,
        conduit >=1.3.1.2,
        conduit-extra >=1.3.4,
        containers >=0.6.0.1,
        cryptonite >=0.25,
        cryptonite-conduit >=0.2.2,
        deepseq >=1.4.4.0,
        directory >=1.3.3.0,
        echo >=0.1.3,
        exceptions >=0.10.4,
        extra >=1.6.19,
        file-embed >=0.0.11.1,
        filelock >=0.1.1.5,
        filepath >=1.4.2.1,
        fsnotify >=0.3.0.1,
        generic-deriving >=1.12.4,
        hackage-security >=0.5.3.0,
        hashable >=1.2.7.0,
        hi-file-parser >=0.1.0.0,
        hpack >=0.33.0,
        hpc >=0.6.0.3,
        hspec >=2.7.1,
        http-client >=0.6.4,
        http-client-tls >=0.3.5.3,
        http-conduit >=2.3.7.3,
        http-download >=0.2.0.0,
        http-types >=0.12.3,
        memory >=0.14.18,
        microlens >=0.4.10,
        mintty >=0.1.2,
        mono-traversable >=1.0.15.1,
        mtl >=2.2.2,
        mustache >=2.3.1,
        neat-interpolation >=0.3.2.6,
        network-uri >=2.6.2.0,
        open-browser >=0.2.1.0,
        optparse-applicative >=0.14.3.0,
        optparse-generic >=1.3.1,
        pantry >=0.5.1.3,
        path >=0.6.1,
        path-io >=1.4.2,
        persistent >=2.9.2,
        persistent-sqlite >=2.9.3,
        persistent-template >=2.6.0,
        pretty >=1.1.3.6,
        primitive >=0.6.4.0,
        process >=1.6.5.0,
        project-template >=0.2.0.1,
        regex-applicative-text >=0.1.0.1,
        retry >=0.8.1.0,
        rio >=0.1.18.0,
        rio-prettyprint >=0.1.1.0,
        semigroups >=0.18.5,
        split >=0.2.3.3,
        stm >=2.5.0.0,
        streaming-commons >=0.2.1.2,
        tar >=0.5.1.1,
        template-haskell >=2.14.0.0,
        temporary >=1.3,
        text >=1.2.3.1,
        text-metrics >=0.3.0,
        th-reify-many >=0.1.9,
        time >=1.8.0.2,
        tls >=1.4.1,
        transformers >=0.5.6.2,
        typed-process >=0.2.6.0,
        unicode-transforms >=0.3.6,
        unix-compat >=0.5.2,
        unliftio >=0.2.12,
        unordered-containers >=0.2.10.0,
        vector >=0.12.1.2,
        yaml >=0.11.2.0,
        zip-archive >=0.4.1,
        zlib >=0.6.2.1

    if os(windows)
        cpp-options:   -DWINDOWS
        build-depends: Win32 >=2.6.1.0

    else
        build-tool-depends: hsc2hs:hsc2hs -any
        build-depends:      unix >=2.7.2.2

    if flag(developer-mode)
        cpp-options: -DSTACK_DEVELOPER_MODE_DEFAULT=True

    else
        cpp-options: -DSTACK_DEVELOPER_MODE_DEFAULT=False

    if !flag(integration-tests)
        buildable: False

    if flag(static)
        ld-options: -static -pthread

test-suite stack-test
    type:             exitcode-stdio-1.0
    main-is:          Spec.hs
    hs-source-dirs:   src/test
    other-modules:
        Stack.ArgsSpec
        Stack.Build.ExecuteSpec
        Stack.Build.TargetSpec
        Stack.Config.DockerSpec
        Stack.ConfigSpec
        Stack.DotSpec
        Stack.Ghci.PortableFakePaths
        Stack.Ghci.ScriptSpec
        Stack.GhciSpec
        Stack.LockSpec
        Stack.NixSpec
        Stack.PackageDumpSpec
        Stack.Types.TemplateNameSpec
        Stack.UploadSpec
        Paths_stack

    default-language: Haskell2010
    ghc-options:
        -Wall -fwarn-tabs -fwarn-incomplete-uni-patterns
        -fwarn-incomplete-record-updates -optP-Wno-nonportable-include-path
        -threaded

    build-depends:
        Cabal >=3.0.0.0,
        QuickCheck >=2.13.2,
        aeson >=1.4.6.0,
        annotated-wl-pprint >=0.7.0,
        ansi-terminal >=0.9.1,
        array >=0.5.3.0,
        async >=2.2.2,
        attoparsec >=0.13.2.3,
        base >=4.10 && <5,
        base64-bytestring >=1.0.0.3,
        bytestring >=0.10.8.2,
        casa-client >=0.0.1,
        casa-types >=0.0.1,
        colour >=2.3.5,
        conduit >=1.3.1.2,
        conduit-extra >=1.3.4,
        containers >=0.6.0.1,
        cryptonite >=0.25,
        cryptonite-conduit >=0.2.2,
        deepseq >=1.4.4.0,
        directory >=1.3.3.0,
        echo >=0.1.3,
        exceptions >=0.10.4,
        extra >=1.6.19,
        file-embed >=0.0.11.1,
        filelock >=0.1.1.5,
        filepath >=1.4.2.1,
        fsnotify >=0.3.0.1,
        generic-deriving >=1.12.4,
        hackage-security >=0.5.3.0,
        hashable >=1.2.7.0,
        hi-file-parser >=0.1.0.0,
        hpack >=0.33.0,
        hpc >=0.6.0.3,
        hspec >=2.7.1,
        http-client >=0.6.4,
        http-client-tls >=0.3.5.3,
        http-conduit >=2.3.7.3,
        http-download >=0.2.0.0,
        http-types >=0.12.3,
        memory >=0.14.18,
        microlens >=0.4.10,
        mintty >=0.1.2,
        mono-traversable >=1.0.15.1,
        mtl >=2.2.2,
        mustache >=2.3.1,
        neat-interpolation >=0.3.2.6,
        network-uri >=2.6.2.0,
        open-browser >=0.2.1.0,
        optparse-applicative >=0.14.3.0,
        pantry >=0.5.1.3,
        path >=0.6.1,
        path-io >=1.4.2,
        persistent >=2.9.2,
        persistent-sqlite >=2.9.3,
        persistent-template >=2.6.0,
        pretty >=1.1.3.6,
        primitive >=0.6.4.0,
        process >=1.6.5.0,
        project-template >=0.2.0.1,
        raw-strings-qq >=1.1,
        regex-applicative-text >=0.1.0.1,
        retry >=0.8.1.0,
        rio >=0.1.18.0,
        rio-prettyprint >=0.1.1.0,
        semigroups >=0.18.5,
        smallcheck >=1.1.5,
        split >=0.2.3.3,
        stack -any,
        stm >=2.5.0.0,
        streaming-commons >=0.2.1.2,
        tar >=0.5.1.1,
        template-haskell >=2.14.0.0,
        temporary >=1.3,
        text >=1.2.3.1,
        text-metrics >=0.3.0,
        th-reify-many >=0.1.9,
        time >=1.8.0.2,
        tls >=1.4.1,
        transformers >=0.5.6.2,
        typed-process >=0.2.6.0,
        unicode-transforms >=0.3.6,
        unix-compat >=0.5.2,
        unliftio >=0.2.12,
        unordered-containers >=0.2.10.0,
        vector >=0.12.1.2,
        yaml >=0.11.2.0,
        zip-archive >=0.4.1,
        zlib >=0.6.2.1

    if os(windows)
        cpp-options:   -DWINDOWS
        build-depends: Win32 >=2.6.1.0

    else
        build-tool-depends: hsc2hs:hsc2hs -any
        build-depends:      unix >=2.7.2.2

    if flag(developer-mode)
        cpp-options: -DSTACK_DEVELOPER_MODE_DEFAULT=True

    else
        cpp-options: -DSTACK_DEVELOPER_MODE_DEFAULT=False
