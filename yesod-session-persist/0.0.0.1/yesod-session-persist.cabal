cabal-version:      2.0
name:               yesod-session-persist
version:            0.0.0.1
license:            MIT
license-file:       LICENSE
maintainer:         Freckle Education
homepage:           https://github.com/freckle/yesod-session-persist#readme
bug-reports:        https://github.com/freckle/yesod-session-persist/issues
synopsis:           SQL session backend for Yesod
description:        Use Persistent to store Yesod sessions
category:           Web
build-type:         Simple
extra-source-files: package.yaml
extra-doc-files:
    README.md
    CHANGELOG.md

source-repository head
    type:     git
    location: https://github.com/freckle/yesod-session-persist

library
    exposed-modules:    Yesod.Session.Persist
    hs-source-dirs:     library
    other-modules:      Paths_yesod_session_persist
    autogen-modules:    Paths_yesod_session_persist
    default-language:   GHC2021
    default-extensions:
        AllowAmbiguousTypes DeriveAnyClass DerivingStrategies
        DuplicateRecordFields FunctionalDependencies GADTs
        ImpredicativeTypes LambdaCase NoFieldSelectors NoImplicitPrelude
        OverloadedRecordDot OverloadedStrings QuantifiedConstraints
        RecordWildCards TypeFamilies UndecidableInstances

    ghc-options:
        -Weverything -Wno-all-missed-specialisations
        -Wno-missed-specialisations -Wno-missing-exported-signatures
        -Wno-missing-import-lists -Wno-missing-kind-signatures
        -Wno-missing-local-signatures -Wno-missing-safe-haskell-mode
        -Wno-monomorphism-restriction -Wno-partial-fields
        -Wno-prepositive-qualified-module -Wno-safe -Wno-unsafe
        -fwrite-ide-info

    build-depends:
        base >=4.16.4.0 && <5,
        internal

library internal
    exposed-modules:
        Base64
        Comparison
        Embedding
        Internal.Prelude
        Randomization
        Session.Freeze
        Session.Key
        Session.KeyRotation
        Session.Timing.Math
        Session.Timing.Options
        Session.Timing.Time
        Session.Timing.Timeout
        Session.TransportSecurity
        Time
        Yesod.Session.Cookie.Logic
        Yesod.Session.Cookie.Reading
        Yesod.Session.Cookie.SetCookie
        Yesod.Session.Embedding.Map
        Yesod.Session.Embedding.Options
        Yesod.Session.Freeze
        Yesod.Session.KeyRotation
        Yesod.Session.Manager
        Yesod.Session.Manager.Load
        Yesod.Session.Manager.Save
        Yesod.Session.Options
        Yesod.Session.Persist.Storage
        Yesod.Session.Persist.Yesod
        Yesod.Session.SaveResult
        Yesod.Session.SessionType
        Yesod.Session.Storage.Exceptions
        Yesod.Session.Storage.Operation
        Yesod.Session.Storage.Save

    hs-source-dirs:     internal
    other-modules:      Paths_yesod_session_persist
    autogen-modules:    Paths_yesod_session_persist
    default-language:   GHC2021
    default-extensions:
        AllowAmbiguousTypes DeriveAnyClass DerivingStrategies
        DuplicateRecordFields FunctionalDependencies GADTs
        ImpredicativeTypes LambdaCase NoFieldSelectors NoImplicitPrelude
        OverloadedRecordDot OverloadedStrings QuantifiedConstraints
        RecordWildCards TypeFamilies UndecidableInstances

    ghc-options:
        -Weverything -Wno-all-missed-specialisations
        -Wno-missed-specialisations -Wno-missing-exported-signatures
        -Wno-missing-import-lists -Wno-missing-kind-signatures
        -Wno-missing-local-signatures -Wno-missing-safe-haskell-mode
        -Wno-monomorphism-restriction -Wno-partial-fields
        -Wno-prepositive-qualified-module -Wno-safe -Wno-unsafe
        -fwrite-ide-info

    build-depends:
        annotated-exception >=0.2.0.0,
        base >=4.16.4.0 && <5,
        base64 >=0.4.2.4,
        bytestring >=0.11.4.0,
        containers >=0.6.5.1,
        cookie >=0.4.6,
        crypton >=0.33,
        exceptions >=0.10.4,
        http-types >=0.12.3,
        mtl >=2.2.2,
        persistent >=2.14.1.0,
        text >=1.2.5.0,
        time >=1.11.1.1,
        transformers >=0.5.6.2,
        wai >=3.2.3,
        yesod-core >=1.6.24.2

test-suite spec
    type:               exitcode-stdio-1.0
    main-is:            Spec.hs
    hs-source-dirs:     tests
    other-modules:
        Session.KeySpec
        Test.Gen.General
        Test.Gen.Mock
        Test.Gen.Session
        Test.Mock
        Test.MockStorage
        Test.Prelude
        Test.Randomization
        Yesod.Session.Manager.LoadSpec
        Yesod.Session.Manager.SaveSpec
        Yesod.Session.Persist.YesodApp
        Yesod.Session.Persist.YesodSpec
        Paths_yesod_session_persist

    autogen-modules:    Paths_yesod_session_persist
    default-language:   GHC2021
    default-extensions:
        AllowAmbiguousTypes DeriveAnyClass DerivingStrategies
        DuplicateRecordFields FunctionalDependencies GADTs
        ImpredicativeTypes LambdaCase NoFieldSelectors NoImplicitPrelude
        OverloadedRecordDot OverloadedStrings QuantifiedConstraints
        RecordWildCards TypeFamilies UndecidableInstances

    ghc-options:
        -Weverything -Wno-all-missed-specialisations
        -Wno-missed-specialisations -Wno-missing-exported-signatures
        -Wno-missing-import-lists -Wno-missing-kind-signatures
        -Wno-missing-local-signatures -Wno-missing-safe-haskell-mode
        -Wno-monomorphism-restriction -Wno-partial-fields
        -Wno-prepositive-qualified-module -Wno-safe -Wno-unsafe
        -fwrite-ide-info -threaded -rtsopts -with-rtsopts=-N

    build-depends:
        QuickCheck >=2.14.3,
        aeson >=2.0.3.0,
        base >=4.16.4.0 && <5,
        containers >=0.6.5.1,
        cookie >=0.4.6,
        hspec >=2.9.7,
        internal,
        mtl >=2.2.2,
        random >=1.2.1.1,
        stm >=2.5.0.2,
        text >=1.2.5.0,
        time >=1.11.1.1,
        wai >=3.2.3,
        wai-extra >=3.1.13.0,
        yesod >=1.6.2.1,
        yesod-core >=1.6.24.2,
        yesod-session-persist,
        yesod-test >=1.6.15
