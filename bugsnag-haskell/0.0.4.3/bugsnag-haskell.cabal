cabal-version:      1.18
name:               bugsnag-haskell
version:            0.0.4.3
license:            MIT
license-file:       LICENSE
maintainer:         pbrisbin@gmail.com
author:             Patrick Brisbin
homepage:           https://github.com/pbrisbin/bugsnag-haskell#readme
synopsis:           Bugsnag error reporter for Haskell
description:        Please see README.md
category:           Web
build-type:         Simple
extra-source-files:
    package.yaml
    test/fixtures/index-project/Foo.hs

extra-doc-files:
    CHANGELOG.md
    README.md

flag examples
    description: Build the examples
    default:     False

library
    exposed-modules:
        Data.Aeson.Ext
        Network.Bugsnag
        Network.Bugsnag.App
        Network.Bugsnag.BeforeNotify
        Network.Bugsnag.Breadcrumb
        Network.Bugsnag.BugsnagRequestHeaders
        Network.Bugsnag.CodeIndex
        Network.Bugsnag.Device
        Network.Bugsnag.Event
        Network.Bugsnag.Exception
        Network.Bugsnag.Exception.Parse
        Network.Bugsnag.Notifier
        Network.Bugsnag.Notify
        Network.Bugsnag.ReleaseStage
        Network.Bugsnag.Report
        Network.Bugsnag.Reporter
        Network.Bugsnag.Request
        Network.Bugsnag.Session
        Network.Bugsnag.Settings
        Network.Bugsnag.Severity
        Network.Bugsnag.StackFrame
        Network.Bugsnag.Thread
        Network.Bugsnag.User

    hs-source-dirs:     src
    other-modules:      Paths_bugsnag_haskell
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        Glob >=0.9.0,
        aeson >=1.3.0.0,
        base >=4.11.0 && <5,
        bytestring >=0.10.12.0,
        case-insensitive >=1.2.1.0,
        containers >=0.6.2.1,
        http-client >=0.6.4.1,
        http-client-tls >=0.3.5.3,
        http-conduit >=2.3.8,
        http-types >=0.12.3,
        iproute >=1.7.11,
        network >=3.1.1.1,
        parsec >=3.1.14.0,
        template-haskell >=2.16.0.0,
        text >=1.2.4.1,
        th-lift-instances >=0.1.18,
        time >=1.9.3,
        ua-parser >=0.7.6.0,
        wai >=3.2.3

executable example-cli
    main-is:            Main.hs
    hs-source-dirs:     examples/cli
    other-modules:      Paths_bugsnag_haskell
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        base >=4.11.0 && <5,
        bugsnag-haskell -any

    if !flag(examples)
        buildable: False

executable example-simple
    main-is:            Main.hs
    hs-source-dirs:     examples/simple
    other-modules:      Paths_bugsnag_haskell
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        base >=4.11.0 && <5,
        bugsnag-haskell -any

    if !flag(examples)
        buildable: False

executable example-warp
    main-is:            Main.hs
    hs-source-dirs:     examples/warp
    other-modules:      Paths_bugsnag_haskell
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        base >=4.11.0 && <5,
        bugsnag-haskell -any,
        wai >=3.2.3,
        warp >=3.3.16

    if !flag(examples)
        buildable: False

executable example-yesod
    main-is:            Main.hs
    hs-source-dirs:     examples/yesod
    other-modules:      Paths_bugsnag_haskell
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        base >=4.11.0 && <5,
        bugsnag-haskell -any,
        unliftio >=0.2.18,
        wai >=3.2.3,
        warp >=3.3.16,
        yesod-core >=1.6.20.1

    if !flag(examples)
        buildable: False

test-suite doctest
    type:               exitcode-stdio-1.0
    main-is:            DocTest.hs
    hs-source-dirs:     ./
    other-modules:      Paths_bugsnag_haskell
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        aeson >=1.5.6.0,
        base >=4.11.0 && <5,
        doctest >=0.17,
        yaml >=0.11.5.0

test-suite spec
    type:               exitcode-stdio-1.0
    main-is:            Spec.hs
    hs-source-dirs:     test
    other-modules:
        Network.Bugsnag.CodeIndexSpec
        Network.Bugsnag.ReportSpec
        Network.BugsnagSpec
        Paths_bugsnag_haskell

    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        aeson >=1.5.6.0,
        aeson-qq >=0.8.3,
        base >=4.11.0 && <5,
        bugsnag-haskell -any,
        hspec >=2.7.10,
        text >=1.2.4.1,
        time >=1.9.3,
        unliftio >=0.2.18
