cabal-version:   1.18
name:            Blammo-wai
version:         0.0.0.0
license:         MIT
license-file:    LICENSE
maintainer:      Freckle Education
homepage:        https://github.com/freckle/blammo#readme
bug-reports:     https://github.com/freckle/blammo/issues
synopsis:        Using Blammo with WAI
description:     Please see README.md
category:        Logging, Web
build-type:      Simple
extra-doc-files:
    README.md
    CHANGELOG.md

source-repository head
    type:     git
    location: https://github.com/freckle/blammo

library
    exposed-modules:    Network.Wai.Middleware.Logging
    hs-source-dirs:     src
    other-modules:      Paths_Blammo_wai
    default-language:   Haskell2010
    default-extensions:
        DerivingStrategies GeneralizedNewtypeDeriving LambdaCase
        NoImplicitPrelude OverloadedStrings RecordWildCards
        TypeApplications

    ghc-options:
        -Weverything -Wno-all-missed-specialisations
        -Wno-missing-exported-signatures -Wno-missing-import-lists
        -Wno-missing-local-signatures -Wno-monomorphism-restriction
        -Wno-safe -Wno-unsafe

    build-depends:
        Blammo >=2.0.0.0,
        aeson >=1.5.2.0,
        base >=4.13.0.0 && <5,
        bytestring >=0.10.10.1,
        case-insensitive >=1.2.1.0,
        clock >=0.8,
        http-types >=0.12.3,
        text >=1.2.4.0,
        unliftio-core >=0.1.2.0,
        wai >=3.2.2.1

    if impl(ghc >=9.8)
        ghc-options: -Wno-missing-role-annotations

    if impl(ghc >=9.2)
        ghc-options: -Wno-missing-kind-signatures

    if impl(ghc >=8.10)
        ghc-options:
            -Wno-missing-safe-haskell-mode -Wno-prepositive-qualified-module

test-suite readme
    type:               exitcode-stdio-1.0
    main-is:            README.lhs
    other-modules:      Paths_Blammo_wai
    default-language:   Haskell2010
    default-extensions:
        DerivingStrategies GeneralizedNewtypeDeriving LambdaCase
        NoImplicitPrelude OverloadedStrings RecordWildCards
        TypeApplications

    ghc-options:
        -Weverything -Wno-all-missed-specialisations
        -Wno-missing-exported-signatures -Wno-missing-import-lists
        -Wno-missing-local-signatures -Wno-monomorphism-restriction
        -Wno-safe -Wno-unsafe -pgmL markdown-unlit

    build-depends:
        Blammo >=2.0.0.0,
        Blammo-wai,
        aeson >=1.5.2.0,
        base >=4.13.0.0 && <5,
        lens >=4.18.1,
        markdown-unlit >=0.5.1,
        text >=1.2.4.0,
        wai >=3.2.2.1,
        warp >=3.3.13,
        yesod-core >=1.6.18.8

    if impl(ghc >=9.8)
        ghc-options: -Wno-missing-role-annotations

    if impl(ghc >=9.2)
        ghc-options: -Wno-missing-kind-signatures

    if impl(ghc >=8.10)
        ghc-options:
            -Wno-missing-safe-haskell-mode -Wno-prepositive-qualified-module
