cabal-version:   1.18
name:            Blammo
version:         1.1.0.0
x-revision: 1
license:         MIT
license-file:    LICENSE
maintainer:      Freckle Education
homepage:        https://github.com/freckle/blammo#readme
bug-reports:     https://github.com/freckle/blammo/issues
synopsis:        Batteries-included Structured Logging library
description:     Please see README.md
category:        Utils
build-type:      Simple
extra-doc-files:
    README.md
    CHANGELOG.md

source-repository head
    type:     git
    location: https://github.com/freckle/blammo

library
    build-depends: wai >=3.2.1.2

    build-depends: vector >=0.12.0.2

    build-depends: unordered-containers >=0.2.10.0

    build-depends: unliftio-core >=0.1.2.0

    build-depends: unliftio >=0.2.9.0

    build-depends: time >=1.8.0.2

    build-depends: text >=1.2.3.1

    build-depends: mtl >=2.2.2

    build-depends: monad-logger-aeson >=0.3.0.2

    build-depends: lens >=4.16.1

    build-depends: http-types >=0.12.2

    build-depends: fast-logger >=2.4.11

    build-depends: exceptions >=0.10.0

    build-depends: envparse >=0.5.0

    build-depends: dlist >=0.8.0.5

    build-depends: containers >=0.5.11.0

    build-depends: clock >=0.7.2

    build-depends: case-insensitive >=1.2.0.11

    build-depends: bytestring >=0.10.8.2

    build-depends: aeson >=1.5.2.0

    exposed-modules:
        Blammo.Logging
        Blammo.Logging.Colors
        Blammo.Logging.Logger
        Blammo.Logging.LogSettings
        Blammo.Logging.LogSettings.Env
        Blammo.Logging.LogSettings.LogLevels
        Blammo.Logging.Simple
        Blammo.Logging.Terminal
        Blammo.Logging.Test
        Data.Aeson.Compat
        Network.Wai.Middleware.Logging

    hs-source-dirs:     src
    other-modules:      Paths_Blammo
    default-language:   Haskell2010
    default-extensions:
        DerivingStrategies LambdaCase NoImplicitPrelude OverloadedStrings
        RecordWildCards TypeApplications

    ghc-options:
        -Weverything -Wno-all-missed-specialisations
        -Wno-missing-exported-signatures -Wno-missing-import-lists
        -Wno-missing-local-signatures -Wno-monomorphism-restriction
        -Wno-safe -Wno-unsafe

    build-depends:
        aeson,
        base >=4.11.1.0 && <5,
        bytestring,
        case-insensitive,
        clock,
        containers,
        dlist,
        envparse,
        exceptions,
        fast-logger,
        http-types,
        lens,
        monad-logger-aeson,
        mtl,
        text,
        time,
        unliftio,
        unliftio-core,
        unordered-containers,
        vector,
        wai

    if impl(ghc >=9.2)
        ghc-options: -Wno-missing-kind-signatures

    if impl(ghc >=8.10)
        ghc-options:
            -Wno-missing-safe-haskell-mode -Wno-prepositive-qualified-module

test-suite readme
    type:               exitcode-stdio-1.0
    main-is:            README.lhs
    other-modules:      Paths_Blammo
    default-language:   Haskell2010
    default-extensions:
        DerivingStrategies LambdaCase NoImplicitPrelude OverloadedStrings
        RecordWildCards TypeApplications

    ghc-options:
        -Weverything -Wno-all-missed-specialisations
        -Wno-missing-exported-signatures -Wno-missing-import-lists
        -Wno-missing-local-signatures -Wno-monomorphism-restriction
        -Wno-safe -Wno-unsafe -pgmL markdown-unlit

    build-depends:
        Blammo,
        aeson,
        base >=4.11.1.0 && <5,
        markdown-unlit,
        text

    if impl(ghc >=9.2)
        ghc-options: -Wno-missing-kind-signatures

    if impl(ghc >=8.10)
        ghc-options:
            -Wno-missing-safe-haskell-mode -Wno-prepositive-qualified-module

test-suite spec
    type:               exitcode-stdio-1.0
    main-is:            Spec.hs
    hs-source-dirs:     tests
    other-modules:
        Blammo.Logging.LoggerSpec
        Blammo.Logging.LogSettings.LogLevelsSpec
        Paths_Blammo

    default-language:   Haskell2010
    default-extensions:
        DerivingStrategies LambdaCase NoImplicitPrelude OverloadedStrings
        RecordWildCards TypeApplications

    ghc-options:
        -Weverything -Wno-all-missed-specialisations
        -Wno-missing-exported-signatures -Wno-missing-import-lists
        -Wno-missing-local-signatures -Wno-monomorphism-restriction
        -Wno-safe -Wno-unsafe

    build-depends:
        Blammo,
        aeson,
        base >=4.11.1.0 && <5,
        hspec,
        mtl,
        text

    if impl(ghc >=9.2)
        ghc-options: -Wno-missing-kind-signatures

    if impl(ghc >=8.10)
        ghc-options:
            -Wno-missing-safe-haskell-mode -Wno-prepositive-qualified-module
