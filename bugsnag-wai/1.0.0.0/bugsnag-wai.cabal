cabal-version:   1.18
name:            bugsnag-wai
version:         1.0.0.0
license:         MIT
license-file:    LICENSE
maintainer:      pbrisbin@gmail.com
author:          Patrick Brisbin
homepage:        https://github.com/pbrisbin/bugsnag-haskell#readme
synopsis:        WAI integration for Bugsnag error reporting for Haskell
description:     Please see README.md
category:        Web
build-type:      Simple
extra-doc-files:
    CHANGELOG.md
    README.md

flag examples
    description: Build the examples
    default:     False

library
    exposed-modules:    Network.Bugsnag.Wai
    hs-source-dirs:     src
    other-modules:      Paths_bugsnag_wai
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        base >=4.11.0 && <5,
        bugsnag >=1.0.0.0,
        bytestring >=0.10.8.2,
        case-insensitive >=1.2.0.11,
        http-types >=0.12.3,
        iproute >=1.7.8,
        network >=2.8.0.1,
        text >=1.2.3.1,
        unordered-containers >=0.2.10.0,
        wai >=3.2.2.1,
        warp >=3.3.5

executable example-warp
    main-is:            Main.hs
    hs-source-dirs:     example
    other-modules:      Paths_bugsnag_wai
    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        base >=4.11.0 && <5,
        bugsnag >=1.0.0.0,
        bugsnag-wai -any,
        wai >=3.2.2.1,
        warp >=3.3.5

    if !flag(examples)
        buildable: False

test-suite spec
    type:               exitcode-stdio-1.0
    main-is:            Spec.hs
    hs-source-dirs:     test
    other-modules:
        Network.Bugsnag.WaiSpec
        Paths_bugsnag_wai

    default-language:   Haskell2010
    default-extensions:
        BangPatterns DataKinds DeriveAnyClass DeriveFoldable DeriveFunctor
        DeriveGeneric DeriveLift DeriveTraversable DerivingStrategies
        FlexibleContexts FlexibleInstances GADTs GeneralizedNewtypeDeriving
        LambdaCase MultiParamTypeClasses NoImplicitPrelude
        NoMonomorphismRestriction OverloadedStrings RankNTypes
        RecordWildCards ScopedTypeVariables StandaloneDeriving
        TypeApplications TypeFamilies

    build-depends:
        base >=4.11.0 && <5,
        bugsnag >=1.0.0.0,
        bugsnag-wai -any,
        hspec >=2.7.1,
        unordered-containers >=0.2.10.0
