cabal-version:      1.18
name:               freckle-http
version:            0.0.0.0
license:            MIT
license-file:       LICENSE
maintainer:         Freckle Education
homepage:           https://github.com/freckle/freckle-app#readme
bug-reports:        https://github.com/freckle/freckle-app/issues
synopsis:           ...
description:        Please see README.md
category:           Utils
build-type:         Simple
extra-source-files: package.yaml
extra-doc-files:
    README.md
    CHANGELOG.md

source-repository head
    type:     git
    location: https://github.com/freckle/freckle-app

library
    exposed-modules:
        Freckle.App.Http
        Freckle.App.Http.Cache
        Freckle.App.Http.Cache.Gzip
        Freckle.App.Http.Cache.Memcached
        Freckle.App.Http.Cache.State
        Freckle.App.Http.Header
        Freckle.App.Http.Paginate
        Freckle.App.Http.Retry
        Freckle.App.HttpSpec
        Freckle.App.Test.Http
        Freckle.App.Test.Http.MatchRequest

    hs-source-dirs:     library
    other-modules:      Paths_freckle_http
    default-language:   GHC2021
    default-extensions:
        DataKinds DeriveAnyClass DerivingVia DerivingStrategies
        DuplicateRecordFields GADTs LambdaCase NoImplicitPrelude
        NoMonomorphismRestriction OverloadedRecordDot OverloadedStrings
        RecordWildCards TypeFamilies

    ghc-options:
        -fignore-optim-changes -fwrite-ide-info -Weverything
        -Wno-all-missed-specialisations -Wno-missing-exported-signatures
        -Wno-missing-import-lists -Wno-missing-kind-signatures
        -Wno-missing-local-signatures -Wno-missing-safe-haskell-mode
        -Wno-monomorphism-restriction -Wno-prepositive-qualified-module
        -Wno-safe -Wno-unsafe

    build-depends:
        Blammo >=2.0.0.0,
        Glob >=0.10.2,
        aeson >=2.0.3.0,
        annotated-exception >=0.2.0.4,
        base >=4.16.4.0 && <5,
        bytestring >=0.11.4.0,
        case-insensitive >=1.2.1.0,
        conduit >=1.3.5,
        directory >=1.3.6.2,
        errors >=2.3.0,
        extra >=1.7.13,
        filepath >=1.4.2.2,
        freckle-memcached >=0.0.0.1,
        hs-opentelemetry-api >=0.1.0.0,
        hspec >=2.8.1,
        http-client >=0.7.13.1,
        http-conduit >=2.3.5,
        http-link-header >=1.2.1,
        http-types >=0.12.3,
        lens >=5.1.1,
        lens-aeson >=1.2.2,
        memcache >=0.3.0.1,
        monad-logger >=0.3.40,
        monad-validate >=1.3.0.0,
        mtl >=2.2.2,
        network-uri >=2.6.4.2,
        retry >=0.8.1.0,
        safe >=0.3.19,
        semigroupoids >=5.3.7,
        serialise >=0.2.6.0,
        text >=1.2.5.0,
        time >=1.11.1.1,
        transformers >=0.5.6.2,
        unliftio >=0.2.25.0,
        unordered-containers >=0.2.19.1

    if impl(ghc >=9.8)
        ghc-options:
            -Wno-missing-role-annotations -Wno-missing-poly-kind-signatures

test-suite spec
    type:               exitcode-stdio-1.0
    main-is:            Main.hs
    hs-source-dirs:     tests
    other-modules:
        Freckle.App.Http.CacheSpec
        Paths_freckle_http

    default-language:   GHC2021
    default-extensions:
        DataKinds DeriveAnyClass DerivingVia DerivingStrategies
        DuplicateRecordFields GADTs LambdaCase NoImplicitPrelude
        NoMonomorphismRestriction OverloadedRecordDot OverloadedStrings
        RecordWildCards TypeFamilies

    ghc-options:
        -fignore-optim-changes -fwrite-ide-info -Weverything
        -Wno-all-missed-specialisations -Wno-missing-exported-signatures
        -Wno-missing-import-lists -Wno-missing-kind-signatures
        -Wno-missing-local-signatures -Wno-missing-safe-haskell-mode
        -Wno-monomorphism-restriction -Wno-prepositive-qualified-module
        -Wno-safe -Wno-unsafe -threaded -rtsopts -with-rtsopts=-N

    build-depends:
        aeson >=2.0.3.0,
        base >=4.16.4.0 && <5,
        bytestring >=0.11.4.0,
        freckle-http,
        hspec >=2.10.10,
        hspec-expectations-json >=1.0.0.7,
        hspec-expectations-lifted >=0.10.0,
        http-types >=0.12.3,
        lens >=5.1.1,
        mtl >=2.2.2,
        time >=1.11.1.1,
        unordered-containers >=0.2.19.1,
        zlib >=0.6.3.0

    if impl(ghc >=9.8)
        ghc-options:
            -Wno-missing-role-annotations -Wno-missing-poly-kind-signatures
