Name:                   websockets-rpc
Version:                0.6.0
Author:                 Athan Clark <athan.clark@gmail.com>
Maintainer:             Athan Clark <athan.clark@gmail.com>
License:                BSD3
License-File:           LICENSE
Synopsis:               Simple streaming RPC mechanism using WebSockets
-- Description:
Category:               Web
Cabal-Version:          >= 1.10
Build-Type:             Simple

Flag Example
  Description:          Build the example websocket RPC test
  Default:              False

Flag Example-Client
  Description:          Build the example websocket client RPC test
  Default:              False

Library
  Default-Language:     Haskell2010
  HS-Source-Dirs:       src
  GHC-Options:          -Wall
  Exposed-Modules:      Network.WebSockets.RPC
                        Network.WebSockets.RPC.Types
                        Network.WebSockets.RPC.ACKable
                        Network.WebSockets.RPC.Trans.Client
                        Network.WebSockets.RPC.Trans.Server
  Build-Depends:        base >= 4.8 && < 5
                      , aeson
                      , async
                      , bytestring
                      , containers
                      , exceptions
                      , hashable
                      , monad-control
                      , mtl
                      , QuickCheck
                      , stm
                      , text
                      , transformers
                      , unordered-containers
                      , uuid
                      , wai-transformers
                      , websockets >= 0.11
                      , websockets-simple >= 0.0.5

Test-suite test
  Type:                 exitcode-stdio-1.0
  Default-Language:     Haskell2010
  Hs-Source-Dirs:       test
  Ghc-Options:          -Wall -threaded
  Main-Is:              Spec.hs
  Other-Modules:        Network.WebSockets.RPCSpec
  Build-Depends:        base
                      , websockets-rpc
                      , aeson
                      , QuickCheck
                      , quickcheck-instances
                      , tasty
                      , tasty-quickcheck

Executable example
  if flag(Example)
    Buildable: True
  else
    Buildable: False
  Default-Language:     Haskell2010
  Hs-Source-Dirs:       example
  Ghc-Options:          -Wall -threaded
  Main-Is:              Main.hs
  Build-Depends:        base
                      , websockets-rpc
                      , aeson
                      , async
                      , exceptions
                      , MonadRandom
                      , mtl
                      , wai-transformers
                      , websockets
                      , websockets-simple

Executable example-client
  if flag(Example)
    Buildable: True
  else
    Buildable: False
  Default-Language:     Haskell2010
  Hs-Source-Dirs:       example
  Ghc-Options:          -Wall -threaded
  Main-Is:              Main-Client.hs
  Build-Depends:        base
                      , websockets-rpc
                      , aeson
                      , async
                      , exceptions
                      , MonadRandom
                      , mtl
                      , wai-transformers
                      , websockets
                      , websockets-simple

Source-Repository head
  Type:                 git
  Location:             https://github.com/athanclark/websockets-rpc
